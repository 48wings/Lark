var __extends=this.__extends||function(i,t){function n(){this.constructor=i}for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);n.prototype=t.prototype,i.prototype=new n},__define=this.__define||function(i,t,n,o){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:n,set:o})},lark;!function(i){var t;!function(t){var n=function(n){function o(i){n.call(this),this.audios=[],this.loaded=!1,this.closed=!1,this.url=i}__extends(o,n);var e=o;return p=e.prototype,p.load=function(i){var t=this;i=i||this.url;var n=new Audio(i);n.addEventListener("canplaythrough",function(){return t.onAudioLoaded()}),n.addEventListener("error",function(){return t.onAudioError()}),n.load(),this.originAudio=n,this.audios.push(n)},p.play=function(i,n){void 0===i&&(i=0),void 0===n&&(n=!1);var o=this.audios.pop();void 0==o?(o=this.originAudio.cloneNode(),o.addEventListener("canplaythrough",function(){return o.currentTime=i})):o.currentTime=i,o.loop=!!n;var e=new t.HtmlSoundChannel(o);return e.$sound=this,e.$loop=n,e.$startTime=i,o.play(),e},p.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),this.audios&&(this.audios.length=0),this.closed=!0},p.$recycle=function(i){this.closed||this.audios.push(i)},p.onAudioLoaded=function(){this.loaded=!0,this.emitWith(i.Event.COMPLETE)},p.onAudioError=function(){this.emitWith(i.Event.IO_ERROR)},o}(i.EventEmitter);t.HtmlSound=n,i.Sound=n}(t=i.web||(i.web={}))}(lark||(lark={}));var lark;!function(i){var t;!function(t){var n=function(t){function n(i){var n=this;t.call(this),this.$loop=!1,this.$startTime=0,this.audio=null,this.onPlayEnd=function(){return 0==n.$loop?void n.stop():(n.audio.load(),n.audio.currentTime=n.$startTime,void n.audio.play())},i.addEventListener("ended",this.onPlayEnd),this.audio=i}__extends(n,t);var o=__define,e=n;return p=e.prototype,p.stop=function(){var t=this.audio;t.pause(),t.removeEventListener("ended",this.onPlayEnd),t.$channel=null,this.audio=null,this.emitWith(i.Event.COMPLETE),this.$sound.$recycle(t),this.$sound=null},o(p,"volume",function(){return this.audio?this.audio.volume:1},function(i){this.audio&&(this.audio.volume=i)}),o(p,"position",function(){return this.audio?this.audio.currentTime:0},void 0),n}(i.EventEmitter);t.HtmlSoundChannel=n}(t=i.web||(i.web={}))}(lark||(lark={}));